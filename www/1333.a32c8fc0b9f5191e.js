"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1333],{1333:(Z,g,a)=>{a.r(g),a.d(g,{DetailsPageModule:()=>_});var m=a(6895),p=a(433),s=a(5035),u=a(1407),h=a(655),b=a(6090),t=a(8256),f=a(2163),x=a(4031);const v=[{path:"",component:(()=>{class n{constructor(i,o,e,c){this.route=i,this.route2=o,this.apiCall=e,this.global=c,this.hours=12,this.mins=32,this.secs=45,this.check=!0,this.site_details={id:"Schedule #1",name:"Mr.Shelby",loc:"Punjab , Pakpattan",stime:"12:00 AM",etime:"4:00 PM",hours:"20:00"},this.checkinout={id:"",status:""}}ngOnInit(){this.item=history.state.data,this.checkinout.id=this.item.id,this.checkinStatus(this.item.id),this.getcounthour(),console.log(this.item),this.from="$this.item.from",this.to="$this.item.to",console.log(this.from,this.to),console.log(this.formatAMPM(new Date)),this.checkk(),this.getCurrentLocation()}ngOnDestroy(){this.checkinStatus(this.item.id),setTimeout(()=>{},3e3)}checkinStatus(i){return(0,h.mG)(this,void 0,void 0,function*(){yield this.apiCall.getCheckinbyShift(i),this.global.Status.subscribe(o=>{console.log(o),this.status=o.status,this.checkk()})})}checkk(){var i=new Date,o=i.getHours(),e=i.getMinutes();const c=o+":"+(e=e<10?"0"+e:e);this.currentTime="$time",console.log(c),this.from="$this.item.from",this.to="$this.item.to",""==this.status&&(console.log("hello"),this.apiCall.api_updateGuardStatus({id:this.item.id,status:"checkin"}),this.check=!1),"checkin"==this.status&&(this.check=!0,this.apiCall.api_updateGuardStatus({id:this.item.id,status:"checkout"}))}activity(){this.route2.navigate(["m-activity"],{state:{data:this.item}})}schedule(){this.route2.navigate(["activity"],{state:{data:this.item}})}notes(){this.route2.navigate(["notes"],{state:{data:this.item}})}formatAMPM(i){var o=i.getHours(),e=i.getMinutes(),c=o>=12?"pm":"am";return o=(o%=12)||12,e=e<10?"0"+e:e,console.log(e),o+":"+e+" "+c}getCurrentLocation(){return(0,h.mG)(this,void 0,void 0,function*(){const i=yield b.b.getCurrentPosition();console.log("Current position:",i);const e=this.distance(i.coords.latitude,i.coords.longitude,this.item.lat,this.item.lng)/1e3;this.totaldistance=e.toFixed(1)+"M",console.log(this.totaldistance)})}distance(i,o,e,c){var l=.017453292519943295,d=Math.cos,k=.5-d((e-i)*l)/2+d(i*l)*d(e*l)*(1-d((c-o)*l))/2;return 12742*Math.asin(Math.sqrt(k))}postchekedstatus(i){return(0,h.mG)(this,void 0,void 0,function*(){this.getcounthour(),console.log(i),"checkin"==i&&(yield this.apiCall.api_postCheck({id:this.item.id,status:"checkin",distance:this.totaldistance,w_id:"",g_id:this.item.g_id,s_id:this.item.id,in_time:""})),"checkout"==i&&(yield this.apiCall.api_postCheck({id:this.item.id,status:"checkout",distance:this.totaldistance,w_id:this.allcounthour.w_id,g_id:this.item.g_id,s_id:this.item.id,in_time:this.allcounthour.in_time}),console.log({id:this.item.id,status:"checkout",distance:this.totaldistance,w_id:this.allcounthour.w_id,g_id:this.item.g_id,s_id:this.item.id,in_time:this.allcounthour.in_time}))})}getcounthour(){return(0,h.mG)(this,void 0,void 0,function*(){yield this.global.Storecounthour.subscribe(i=>(0,h.mG)(this,void 0,void 0,function*(){this.allcounthour=yield i[0],console.log(this.allcounthour)}))})}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(f.y),t.Y36(x.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-details"]],decls:59,vars:9,consts:[[1,"ion-no-border","header"],["size","2","color","primary",2,"margin-top","45px"],["color","tertiary","defaultHref",""],["size","8",1,"ion-text-center",2,"margin-top","45px"],["color","tertiary"],["size","2"],["mode","ios",1,"ctnt"],[1,"list"],["color","light",1,"card2"],["size","12",1,"ion-no-padding"],["color","primary",1,"card"],["slot","end"],["size","12",1,"buttons"],[1,"btn2",3,"click"],["name","body-outline",1,"icc2"],[1,"hom"],["name","time",1,"icc2"],["expand","block",1,"btn3",3,"click"],["expand","block",1,"btn3",2,"color","white",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"ion-header",0)(1,"ion-row")(2,"ion-col",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-col",3)(5,"ion-title",4),t._uU(6),t.qZA()(),t._UZ(7,"ion-col",5),t.qZA()(),t.TgZ(8,"ion-content",6),t._UZ(9,"ion-list",7),t.TgZ(10,"ion-card",8)(11,"ion-row")(12,"ion-col",9)(13,"ion-card",10)(14,"ion-item")(15,"ion-label"),t._uU(16,"Post Site"),t.qZA(),t.TgZ(17,"ion-label",11),t._uU(18),t.qZA()(),t.TgZ(19,"ion-item")(20,"ion-label"),t._uU(21,"Start Time"),t.qZA(),t.TgZ(22,"ion-label",11),t._uU(23),t.qZA()(),t.TgZ(24,"ion-item")(25,"ion-label"),t._uU(26,"End Time"),t.qZA(),t.TgZ(27,"ion-label",11),t._uU(28),t.qZA()(),t.TgZ(29,"ion-item")(30,"ion-label"),t._uU(31,"Location"),t.qZA(),t.TgZ(32,"ion-label",11),t._uU(33),t.qZA()(),t.TgZ(34,"ion-item")(35,"ion-label"),t._uU(36,"Date"),t.qZA(),t.TgZ(37,"ion-label",11),t._uU(38),t.ALo(39,"date"),t.qZA()()()()(),t.TgZ(40,"ion-col",12)(41,"ion-button",13),t.NdJ("click",function(){return o.activity()}),t.TgZ(42,"h1"),t._UZ(43,"ion-icon",14),t.qZA(),t.TgZ(44,"ion-label",15),t._uU(45,"See Activity"),t.qZA()(),t.TgZ(46,"ion-button",13),t.NdJ("click",function(){return o.schedule()}),t.TgZ(47,"h1"),t._UZ(48,"ion-icon",16),t.qZA(),t.TgZ(49,"ion-label",15),t._uU(50,"Add Activity"),t.qZA()()()(),t.TgZ(51,"footer")(52,"ion-row")(53,"ion-col")(54,"ion-button",17),t.NdJ("click",function(){return o.postchekedstatus("checkin")}),t._uU(55,"Check In"),t.qZA()(),t.TgZ(56,"ion-col")(57,"ion-button",18),t.NdJ("click",function(){return o.postchekedstatus("checkout")}),t._uU(58,"Check Out"),t.qZA()()()()()),2&i&&(t.xp6(6),t.Oqu(o.item.s_name),t.xp6(12),t.Oqu(o.item.s_name),t.xp6(5),t.Oqu(o.item.from),t.xp6(5),t.Oqu(o.item.to),t.xp6(5),t.Oqu(o.item.location),t.xp6(5),t.Oqu(t.xi3(39,6,o.item.date,"MM/dd/yyyy")))},dependencies:[s.oU,s.YG,s.PM,s.wI,s.W2,s.Gu,s.gu,s.Ie,s.Q$,s.q_,s.Nd,s.wd,s.cs,m.uU],styles:[".hom[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:absolute;top:49px;font-weight:600}.header[_ngcontent-%COMP%]{height:100px;background:var(--ion-color-primary)}.list[_ngcontent-%COMP%]{background:var(--ion-color-primary);height:15%;width:100%;position:fixed}ion-row[_ngcontent-%COMP%]{display:flex;align-items:center}.icc2[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:absolute;font-size:30px;top:11px;right:26px}.btn2[_ngcontent-%COMP%]{border:1px solid var(--ion-color-primary);--border-width: 2px;--box-shadow: none;--border-radius: 8px;--background: white;height:80px;width:114px;text-align:center;border-radius:10px;display:flex;justify-content:center;box-shadow:rgba(0,0,0,.15) 0 3px 3px;font-size:13px}.icc[_ngcontent-%COMP%]{font-size:23px;font-size:22px;margin-left:10px;margin-top:-3px}h5[_ngcontent-%COMP%]{font-size:18px;font-weight:600;display:flex;justify-content:center;align-items:center}ion-item[_ngcontent-%COMP%]{color:#fff;--background: none}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:15px}.card[_ngcontent-%COMP%]{height:241px;width:90%;margin:20px auto auto;color:#fff;border-radius:13px;box-shadow:rgba(17,17,26,.1) 0 4px 16px,rgba(17,17,26,.1) 0 8px 24px,rgba(17,17,26,.1) 0 16px 56px}ion-fab[_ngcontent-%COMP%]{top:80%}div[_ngcontent-%COMP%]{display:flex;justify-content:center}ion-fab-button[_ngcontent-%COMP%]{border:1px solid var(--ion-color-primary);--border-width: 2px;--box-shadow: none;--border-radius: 8px;--background: var(--ion-color-tertiary);--color:var(--ion-color-primary) ;height:43px;width:100px;--border-radius: 0px;top:80%}.card2[_ngcontent-%COMP%]{border-radius:15px;z-index:10;width:95%;margin:auto;background:white;box-shadow:none}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-top:20px}.btn3[_ngcontent-%COMP%]{--color: white}"]}),n})()}];let y=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.Bz.forChild(v),u.Bz]}),n})(),_=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.ez,p.u5,s.Pc,y]}),n})()}}]);